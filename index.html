<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ave Maria Cloud</title>
    <link rel="icon" type="image/jpeg" href="Sassoferrato_-_Jungfrun_i_boÌˆn.jpg">
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header styles */
        header {
            background-color: #1e3a8a;
            color: white;
            padding: 2rem;
            width: 100%;
        }

        .header-content {
            width: 100%;
            padding: 0 2rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        blockquote {
            font-style: italic;
            border-left: 4px solid #93c5fd;
            padding-left: 1rem;
            margin: 1rem 0;
            font-size: 1.1rem;
            max-width: 1400px;
        }

        /* Main content styles */
        main {
            flex-grow: 1;
            width: 100%;
            padding: 2rem;
        }

        /* Changed from grid to vertical stack */
        .content-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            width: 100%;
        }

        section {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        h2 {
            color: #1e3a8a;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        /* Link styles */
        .tools-list {
            list-style: none;
            display: grid;
            gap: 1rem;
        }

        .tools-list li {
            margin: 0;
        }

        .tools-list a {
            color: #2563eb;
            text-decoration: none;
            display: block;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .tools-list a:hover {
            color: #1e40af;
            background-color: #e5e7eb;
            transform: translateX(5px);
        }

        /* Footer styles */
        footer {
            background-color: #1e3a8a;
            color: white;
            padding: 1.5rem;
            text-align: center;
            width: 100%;
        }

        footer a {
            color: #93c5fd;
            text-decoration: none;
            margin-top: 0.5rem;
            display: inline-block;
            transition: color 0.2s;
        }

        footer a:hover {
            color: #dbeafe;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Welcome</h1>
            <blockquote>
                Luke 1:26-28 New American Bible (Revised Edition)<br><br>
                26 In the sixth month, the angel Gabriel was sent from God to a town of Galilee called Nazareth, 
                27 to a virgin betrothed to a man named Joseph, of the house of David, and the virgin's name was Mary. 
                28 And coming to her, he said, "Hail, favored one! The Lord is with you."
            </blockquote>

            <blockquote id="randomScripturePassage">
            </blockquote>
        </div>
    </header>

    <main>
        <div class="content-container">
            <section>
                <ul class="tools-list">
                    <li><a href="zionism-research-tool/">Zionism Research Tool</a></li>
                    <li><a href="image-creator/">Image Creator</a></li>
                    <li><a href="multi-model-chatbot/">Multi-Model Chatbot</a></li>
                    <li><a href="love-translator/">Love Translator</a></li>
                    <li><a href="text-analyzer/">Text Analyzer</a></li>
                    <li><a href="miscellaneous-tools/">Miscellaneous Tools</a></li>
                    <li><a href="multi-model-chatbot/system-and-user-message.html">AI Research Tool</a></li>
                </ul>
            </section>
        </div>
    </main>
</body>
</html>

<div id="informationFooter" style="padding-left: 4em; padding-right: 4em;"></div>
<script src="https://www.avemariacloud.com/generic-loader.js"></script>
    
<script>



async function fetchRandomScripturePassage(retryCount = 5) {
  const maxRetries = 5; // Maximum number of retries
  const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

  document.getElementById("randomScripturePassage").innerHTML = `Trying to download a verse...
<BR>
<button
  onclick="fetchRandomScripturePassage();"
  style="
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 0.4em;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin-top: 0.6em;
    cursor: pointer;
    border-radius: 12px;
    transition: background-color 0.3s ease;
  "
  onmouseover="this.style.backgroundColor='#45a049';"
  onmouseout="this.style.backgroundColor='#4CAF50';">
  Refresh
</button>`;

  const url = 'https://proxy.small-recipe-9582.workers.dev/';
  const headers = {
    'authorization': 'Bearer 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',
    'content-type': 'application/json'
  };

  const now = new Date();
  const body = {
    "model": "mistral-saba-24b",
    "messages": [
      {
        "role": "system",
        "content": `I am interested in a single verse of Scripture.

Please respond in JSON with these exact labels: Book, Chapter, Verse_Number, Official_Book_Name.

I am interested in the Official_Book_Name label using the official book name, spelling, and capitalization relating to the book that is returned.
        
Please use this list of strings to refer to a book within the book label.

1chronicles, 1corinthians, 1esdras, 1john, 1kings, 1maccabees, 1peter, 1samuel, 1thessalonians, 1timothy,
2chronicles, 2corinthians, 2esdras, 2john, 2kings, 2maccabees, 2peter, 2samuel, 2thessalonians, 2timothy,
3john, acts, amos, baruch, belandthedragon, colossians, daniel, deuteronomy, ecclesiastes, ecclesiasticus,
ephesians, esther(greek), esther, exodus, ezekiel, ezra, galatians, genesis, habakkuk, haggai, hebrews,
hosea, isaiah, james, jeremiah, job, joel, john, jonah, joshua, jude, judges, judith, lamentations,
leviticus, luke, malachi, manasseh, mark, matthew, micah, nahum, nehemiah, numbers, obadiah, philemon,
philippians, proverbs, psalms, revelation, romans, ruth, songofsolomon, songofthethree, susanna, titus,
tobit, wisdom, zechariah, zephaniah`
      },
      {
        "role": "user",
        "content": now
      }
    ],
    "response_format": { "type": "json_object" }
  };

  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: headers,
      body: JSON.stringify(body)
    });

    if (!response.ok) {
      throw new Error('Network response was not ok');
    }

    const data = await response.json();
    var PassageInformation = JSON.parse(data['choices'][0]['message']['content']);

    console.log(PassageInformation);

    // Fetch the actual verse text
    const verseUrl = `https://cdn.jsdelivr.net/gh/wldeh/bible-api/bibles/en-kjv/books/${PassageInformation['Book'].toLowerCase()}/chapters/${PassageInformation['Chapter']}/verses/${PassageInformation['Verse_Number']}.json`;

    const verseResponse = await fetch(verseUrl);
    if (!verseResponse.ok) {
      throw new Error('Failed to fetch verse text');
    }
    
    const verseData = await verseResponse.json();

    document.getElementById("randomScripturePassage").innerHTML = `
      ${PassageInformation['Official_Book_Name']} ${PassageInformation['Chapter']}:${PassageInformation['Verse_Number']} (King James Version)
      <BR>
      ${verseData.text}
      <BR>
      <button
        onclick="fetchRandomScripturePassage();"
        style="
          background-color: #4CAF50;
          border: none;
          color: white;
          padding: 0.4em;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin-top: 0.6em;
          cursor: pointer;
          border-radius: 12px;
          transition: background-color 0.3s ease;
        "
        onmouseover="this.style.backgroundColor='#45a049';"
        onmouseout="this.style.backgroundColor='#4CAF50';">
        Refresh
      </button>
      
      <button
        onclick="window.open('https://www.avemariacloud.com/multi-model-chatbot/?startMessage=' + encodeURIComponent('I would like to chat about this verse: ${verseData.text}'), '_blank');"
        style="
          background-color: #4CAF50;
          border: none;
          color: white;
          padding: 0.4em;
          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin-top: 0.6em;
          cursor: pointer;
          border-radius: 12px;
          transition: background-color 0.3s ease;
        "
        onmouseover="this.style.backgroundColor='#45a049';"
        onmouseout="this.style.backgroundColor='#4CAF50';">
        Chat About This Verse
      </button>`;

    return data;

  } catch (error) {
    console.error(`Attempt ${retryCount + 1}: ${error}`);

    if (retryCount < maxRetries) {
      let waitTime = Math.pow(2, retryCount) * 1000; // Exponential backoff (2^n * 1000ms)
      console.log(`Retrying in ${waitTime / 1000} seconds...`);
      await delay(waitTime);
      return fetchRandomScripturePassage(retryCount + 1);
    } else {
      fetchRandomScripturePassage();
    }
  }
}


// Call the function
fetchRandomScripturePassage();

</script>
