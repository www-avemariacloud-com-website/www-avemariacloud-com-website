import React, { useRef, useEffect } from 'react';

const ChatInterface = () => {
  const chatMessagesRef = useRef(null);
  
  useEffect(() => {
    // Auto-focus the input field on component mount
    const input = document.getElementById('userInput');
    if (input) input.focus();
  }, []);

  return (
    <div className="flex flex-col h-screen p-2 sm:p-4 bg-gray-100">
      {/* Header */}
      <div className="bg-white rounded-lg shadow-md p-3 sm:p-4 mb-2 sm:mb-4">
        <div className="flex flex-col gap-4">
          <h1 className="text-xl sm:text-2xl font-bold text-gray-800 text-center sm:text-left">
            Multi Model AI Chatbot
          </h1>
          <div className="flex flex-col sm:flex-row items-start sm:items-center gap-4">
            <select 
              id="aiModel"
              className="w-full sm:w-auto p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 order-2 sm:order-1"
            >
              <option value="gemma2-9b-it">gemma2-9b-it</option>
              <option value="llama-3.2-90b-vision-preview" selected>llama-3.2-90b-vision-preview</option>
              <option value="mixtral-8x7b-32768">mixtral-8x7b-32768</option>
            </select>
            <div className="text-sm text-gray-600 order-1 sm:order-2">
              <p>Select an AI model above to customize your chat experience. Each model has different capabilities and response styles.</p>
              <p className="mt-1 text-xs">Note: You can switch models at any time during your conversation. Each new message will be processed by your selected model.</p>
            </div>
          </div>
        </div>
      </div>

      {/* Chat Container */}
      <div className="flex-1 bg-white rounded-lg shadow-md p-3 sm:p-4 mb-2 sm:mb-4 overflow-hidden flex flex-col">
        <div 
          id="chatMessages"
          ref={chatMessagesRef}
          className="flex-1 overflow-y-auto space-y-3 sm:space-y-4"
        >
          <div className="message mr-auto bg-gray-100 text-gray-800 p-3 rounded-lg break-words">
            Hello! How can I assist you today?
          </div>
        </div>
      </div>

      {/* Input Area */}
      <div className="bg-white rounded-lg shadow-md p-3 sm:p-4 mb-2 sm:mb-4">
        <form id="chatForm" className="flex gap-2 sm:gap-4">
          <input
            type="text"
            id="userInput"
            className="flex-1 p-2 sm:p-3 text-sm sm:text-base border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            placeholder="Type your message..."
            required
          />
          <button
            type="submit"
            className="bg-blue-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg hover:bg-blue-600 transition-colors text-sm sm:text-base"
          >
            Send
          </button>
        </form>
      </div>

      {/* Legal Notice */}
      <div className="bg-white rounded-lg shadow-md p-3 sm:p-4 text-xs sm:text-sm text-gray-600">
        <p className="mb-3 sm:mb-4">By using this tool, maybe you should read and agree to this Terms of Service and this Privacy Policy. I desire that these things will benefit you.</p>
        <p className="mb-2"><strong>Built with Meta Llama 3:</strong> This tool incorporates Meta Llama 3, which is licensed under the Meta Llama 3 Community License. Copyright Â© Meta Platforms, Inc. All Rights Reserved.</p>
        <p className="mb-2"><strong>Gemma:</strong> This Plugin utilizes Gemma, a machine learning model by Google LLC. By using this Plugin, you agree to comply with the Gemma Terms of Use. Google LLC disclaims all warranties; use of this Plugin is at your own risk.</p>
        <p className="mb-2"><strong>Mixtral-8x7B License:</strong> Mixtral-8x7B is distributed under the Apache 2.0 license.</p>
      </div>
    </div>
  );
};

export default ChatInterface;
