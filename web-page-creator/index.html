<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Page Creator</title>
    <style>
        /* Modern CSS Reset and Global Styles */
        :root {
            --primary: #4361ee;
            --primary-hover: #3a56d4;
            --secondary: #f72585;
            --text-dark: #2b2d42;
            --text-light: #8d99ae;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --border-light: #e9ecef;
            --success: #38b000;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --radius: 12px;
            --radius-sm: 8px;
            --font-main: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            font-family: var(--font-main);
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 0.5em;
        }

        /* Layout */
        .container {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            padding: 0;
        }

        /* Card Styling */
        .card {
            background-color: var(--bg-white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 2rem;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            margin: 0;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .card-body {
            padding: 2rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 0rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-dark);
            font-size: 1rem;
        }

        textarea, select {
            width: 100%;
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-family: inherit;
            background-color: var(--bg-white);
            color: var(--text-dark);
            transition: var(--transition);
        }

        textarea {
            height: 180px;
            resize: vertical;
        }

        textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
        }

        /* Button Styling */
        .btn {
            display: inline-block;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-group {
            display: flex;
            gap: 0;
            width: 100%;
        }

        .btn-group .btn {
            flex: 1;
            border-radius: 0;
        }

        .btn-group .btn:first-child {
            border-top-left-radius: var(--radius-sm);
            border-bottom-left-radius: var(--radius-sm);
        }

        .btn-group .btn:last-child {
            border-top-right-radius: var(--radius-sm);
            border-bottom-right-radius: var(--radius-sm);
        }

        /* Status Area */
        .status {
            padding: 1.5rem;
            border-radius: var(--radius-sm);
            margin: 1.5rem 0;
            background-color: var(--bg-light);
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
        }

        .status-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
            color: var(--primary);
        }

        .status-text {
            flex: 1;
        }

        /* Preview Area */
        .preview-title {
            margin: 2rem 0 1rem 0;
            display: flex;
            align-items: center;
            font-size: 1.25rem;
        }

        .preview-title i {
            margin-right: 0.5rem;
        }

        .preview-frame {
            width: 100%;
            height: 600px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        /* Info Footer */
        .info-footer {
            margin-top: 3rem;
            padding: 2rem;
            border-top: 1px solid var(--border-light);
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Loading Animation */
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .loading {
            animation: pulse 1.5s infinite;
        }

        /* Responsive Design */
        @media screen and (max-width: 991px) {
            .container {
                padding: 0rem;
            }
            
            .card-header, .card-body {
                padding: 1.5rem;
            }
        }
        
        @media screen and (max-width: 768px) {
            .container {
                padding: 0rem;
            }
            
            .card-header, .card-body {
                padding: 1.25rem;
            }
            
            .preview-frame {
                height: 450px;
            }
            
            .card-title {
                font-size: 1.25rem;
            }
        }
        
        @media screen and (max-width: 576px) {
            .container {
                padding: 0rem;
            }
            
            .card-header, .card-body {
                padding: 1rem;
            }
            
            .preview-frame {
                height: 350px;
            }
            
            textarea {
                height: 150px;
            }
            
            .btn {
                padding: 0.625rem 1.25rem;
            }
        }

        /* Theme Toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
        }

        /* Dark Mode */
        .dark-mode {
            --primary: #4cc9f0;
            --primary-hover: #3db8df;
            --secondary: #f72585;
            --text-dark: #e9ecef;
            --text-light: #adb5bd;
            --bg-light: #1a1a2e;
            --bg-white: #16213e;
            --border-light: #0f3460;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h1 class="card-title">Web Page Creator</h1>
            </div>
            
            <div class="card-body">
                <form id="generator-form">

<div class="form-group">
    <label for="example-web-page-idea">
        <i class="fas fa-image"></i> Web Page Idea and/or Information
    </label>
    <div class="btn-group">
        <button type="button" onclick="exampleWebPageIdea();" id="example-web-page-idea-button" class="btn btn-primary">
            <i class="fas fa-upload"></i> Example Idea
        </button>
        <button type="button" onclick="window.open('https://www.avemariacloud.com/Jesus-Loves/Andrew-Outreach-Orphanage/', '_blank');" id="example-web-page-button" class="btn btn-primary">
            <i class="fas fa-trash"></i> Example Web Page
        </button>
    </div>
</div>


                        <BR>
                        <textarea id="user-message" placeholder="Describe your web page idea here..."></textarea>

                        <!-- Add this right after the textarea in your form -->
<div class="form-group">
    <label for="image-upload">
        <i class="fas fa-image"></i> Upload Images (It may take some time for images to be displayed on the web page)
    </label>
    <input type="file" id="image-upload" multiple accept="image/*" style="display: none;">
    <div class="btn-group">
        <button type="button" id="upload-button" class="btn btn-primary">
            <i class="fas fa-upload"></i> Select Images
        </button>
        <button type="button" id="clear-images" class="btn btn-primary">
            <i class="fas fa-trash"></i> Clear Images
        </button>
    </div>
    <div id="image-preview" style="margin-top: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
</div>
                    
                    <script>

                        // Image Upload Functionality
document.getElementById('upload-button').addEventListener('click', () => {
    document.getElementById('image-upload').click();
});

document.getElementById('image-upload').addEventListener('change', async (e) => {
        const files = e.target.files;
        if (files.length === 0) return;
        
        const responseText = document.getElementById('response-text');
        responseText.innerHTML = '<div class="status-icon"><i class="fas fa-spinner fa-spin"></i></div><div class="status-text">Uploading and analyzing images...</div>';
        
        const imagePreview = document.getElementById('image-preview');
        imagePreview.innerHTML = '';
        
        let uploadedData = [];
        
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            
            // Show preview
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.maxWidth = '100px';
                img.style.maxHeight = '100px';
                img.style.borderRadius = '4px';
                imagePreview.appendChild(img);
            };
            reader.readAsDataURL(file);
            
            // Upload to server and analyze
            try {
                const formData = new FormData();
                formData.append('image', file);
                
                const response = await fetch('https://image-uploader-and-analyzer.small-recipe-9582.workers.dev/', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) throw new Error('Upload failed');
                
                const data = await response.json();
                if (data.results && data.results[0].success) {
                    uploadedData.push({
                        url: data.results[0].url,
                        description: data.results[0].aiResponse?.Image_Description || "No description available"
                    });
                }
            } catch (error) {
                console.error('Error uploading image:', error);
            }
        }
        
        // Update textarea with image URLs and descriptions
        if (uploadedData.length > 0) {
            const textarea = document.getElementById('user-message');
            let imageText = '\n\nI am interested in using these images.\n\n';
            uploadedData.forEach((item, index) => {
                imageText += `Image ${index + 1}) ${item.url} (Image Description: ${item.description})\n\n`;
            });
            
            textarea.value += imageText;
            responseText.innerHTML = '<div class="status-icon"><i class="fas fa-check-circle"></i></div><div class="status-text">Images uploaded and analyzed successfully!</div>';
        } else {
            responseText.innerHTML = '<div class="status-icon"><i class="fas fa-exclamation-circle"></i></div><div class="status-text">No images were uploaded successfully.</div>';
        }
    });



// Clear images button
document.getElementById('clear-images').addEventListener('click', () => {
    document.getElementById('image-upload').value = '';
    document.getElementById('image-preview').innerHTML = '';
});

                        function exampleWebPageIdea() {
                            document.getElementById('user-message').value = `Andrew Outreach Orphanage

Location: Bugiri district 
P.o Box 78 (U)
Tell: +256709401422

It was established in 2016 by the CEO KIiza Abel

Reminder the district changed post office number from 37 to 78

I am interested in using these images.

Image 1) https://public-web-pages.github.io/custom-web-page/images/700784ad8554f62c.jpg (Image Description: A group of children are standing together in a circle, looking up at the camera. They are all smiling and appear to be happy. The children are all wearing casual clothing, such as t-shirts and tank tops, and some of them have their arms around each other. The background is a dirt ground, suggesting that the photo was taken outdoors in a rural or natural setting. Overall, the image conveys a sense of joy and camaraderie among the children.)

Image 2) https://public-web-pages.github.io/custom-web-page/images/49f0b5acf418b895.jpg (Image Description: A group of young children, all with dark skin and short hair, are gathered together and looking up at the camera. They are all wearing casual clothing, such as t-shirts and button-down shirts, and some of them have their hands raised in the air. The background is out of focus, but it appears to be a dirt or sandy area.)

Image 3) https://public-web-pages.github.io/custom-web-page/images/c46d299ea855c48d.jpg (Image Description: A young boy is holding a large bunch of bananas in front of a group of children.)

Image 4) https://public-web-pages.github.io/custom-web-page/images/3a309159f07b1c4b.jpg (Image Description: A young boy holding a yellow sign that reads 'SUPPORT US WITH A DAILY MEAL' in red letters. He is surrounded by other children, some of whom are also holding signs or bottles. The background is blurry, but it appears to be an outdoor setting with greenery and trees. The overall atmosphere suggests a fundraising or awareness campaign for a cause related to food or nutrition.)

Image 5) https://public-web-pages.github.io/custom-web-page/images/000012cfafa4a1a5.jpg (Image Description: A group of children gathered around a table with watermelons and bananas, with some of them raising their hands in the air.)

Image 6) https://public-web-pages.github.io/custom-web-page/images/7ae6586126fc5fe4.jpg (Image Description: A registration certificate for a community development project in Uganda, featuring a government seal and stamps, with text describing the project's purpose and details.)

Image 7) https://public-web-pages.github.io/custom-web-page/images/7f41ac7a6b6b6534.jpg (Image Description: A young boy is holding a large crucifix in front of his chest. He is wearing a red and gray striped shirt and a green beaded necklace. In the background, there are several other children sitting on the ground, but they are out of focus.)`;
                        }
                    </script>
                    
                    <div class="form-group">
                        <label for="modelSelect">
                            <i class="fas fa-robot"></i> Select AI Model
                        </label>
                        <select id="modelSelect">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                    <BR>
                    <div class="form-group">
                        <label for="webPageTemplate">
                            <i class="fas fa-robot"></i> Select Web Page Template
                        </label>
                        <select id="webPageTemplate">
                            <option value="timeless">Timeless</option>
                            <option value="modern">Modern</option>
                            <option value="experimental">Experimental</option>
                            <option value="lots_of_content">Lots of Content</option>
                            <option value="animations">Animations</option>
                        </select>
                    </div>

                    <BR>

                    <button type="button" id="submit-button" class="btn btn-primary btn-block">
                        <i class="fas fa-magic"></i> Create Web Page
                    </button>
                </form>
                
                <div id="response-text" class="status">
                    <div class="status-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="status-text">Ready for creation...</div>
                </div>
                
                <div id="htmlFileButtons" class="btn-group">
                    <button id="download" class="btn btn-primary" onclick="downloadHTML(sessionStorage.getItem('FILE_NAME'), sessionStorage.getItem('HTML_FILE'));">
                        <i class="fas fa-download"></i> Download HTML File
                    </button>
                    <button id="openInNewTab" class="btn btn-primary" onclick="openTab(sessionStorage.getItem('HTML_FILE'));">
                        <i class="fas fa-external-link-alt"></i> Open In New Tab
                    </button>
                </div>

                <BR>
                
                <!-- Add this new button below the existing button group -->
                <button id="uploadToInternet" class="btn btn-primary btn-block" onclick="uploadHTMLToInternet();">
                    <i class="fas fa-cloud-upload-alt"></i> Upload HTML File to Internet
                </button>
                
                <h2 class="preview-title">
                    <i class="fas fa-eye"></i> Preview
                </h2>
                <iframe id="myIframe" class="preview-frame" title="Web Page Preview"></iframe>
            </div>
        </div>
        
        <div id="informationFooter" class="info-footer"></div>
    </div>


    <script>

async function uploadHTMLToInternet() {
    const responseText = document.getElementById('response-text');
    const htmlContent = sessionStorage.getItem('HTML_FILE');
    
    if (!htmlContent) {
        responseText.innerHTML = '<div class="status-icon"><i class="fas fa-exclamation-circle"></i></div><div class="status-text">No HTML content to upload. Please create a web page first.</div>';
        return;
    }
    
    try {
        responseText.innerHTML = '<div class="status-icon"><i class="fas fa-spinner fa-spin"></i></div><div class="status-text">Uploading HTML file to the internet...</div>';
        
        const response = await fetch('https://html-file-uploader.small-recipe-9582.workers.dev/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `html=${encodeURIComponent(htmlContent)}`
        });
        
        if (!response.ok) {
            throw new Error(`Upload failed: ${response.statusText}`);
        }
        
        const data = await response.json();
        
        if (data.success && data.url) {
            responseText.innerHTML = `
                <div class="status-icon"><i class="fas fa-check-circle"></i></div>
                <div class="status-text">
                    File uploaded successfully! It may take some time for this file to be deployed.<br>
                    URL: <a href="${data.url}" target="_blank">${data.url}</a>
                </div>
            `;
            
            // Store the URL in sessionStorage for potential future use
            sessionStorage.setItem('UPLOADED_URL', data.url);
        } else {
            throw new Error(data.message || 'Unknown error occurred during upload');
        }
    } catch (error) {
        responseText.innerHTML = `
            <div class="status-icon"><i class="fas fa-exclamation-circle"></i></div>
            <div class="status-text">
                Upload failed: ${error.message}
            </div>
        `;
    }
}

        const apiKey = "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";
        const apiUrl = "https://proxy.small-recipe-9582.workers.dev/";
        const MAX_RETRIES = 6;
        const RETRY_DELAY = 1000; // 1 second

        async function makeApiRequest(retryCount = 0) {

            var webPageTemplateBase = `I am interested in you creating a web page.

I am interested in a complete web page in a single HTML file.

I am interested in using vanilla HTML and vanilla CSS

I am interested in having full ownership of this code, and I am interested in releasing it into the public domain.

I am interested in using well established code principles and designs.

I am interested in you filling this web page with truthful and relevant content.

I am interested in content that is acceptable to a Christian audience.

I am interested in this web page being usable in a production environment.

I am interested in requiring that this HTML code be included in the web page at the bottom of the web page: \`\`\`HTML
<div id="informationFooter" style="padding-left: 4em; padding-right: 4em;"></div>
\`\`\`

I am interested in requiring that this external Javascript file be run on this web page after the informationFooter: https://www.avemariacloud.com/generic-loader.js

The Javascript code that I referenced earlier will populate the “informationFooter” div with some information that I have.

I am interested in https://www.avemariacloud.com/generic-loader.js being the only JS code on the page.

Please respond in JSON with the labels HTML_FILE and FILE_NAME 

Please place only HTML code within the label: "HTML_FILE"

Please ensure that the FILE_NAME ends in .html`;

            const webPageTemplate = {

            "timeless": `I am interested in this web page having a safe and timeless design.`,
            "modern": `I am interested in this web page having a modern design.`,
            "experimental": `I am interested in this web page having an experimental design.`,
            "lots_of_content": `I am interested in this web page having a lot of content.`,
            "animations": `I am interested in this web page having animations.`

            };

            const systemMessage = webPageTemplateBase + `

` + webPageTemplate[document.getElementById("webPageTemplate").value];

            console.log(systemMessage);

            const userMessage = "Web Page Idea and/Or Information: " + document.getElementById('user-message').value;
            const selectedModel = document.getElementById('modelSelect').value;
            const requestJson = true;
            const responseText = document.getElementById('response-text');
            
            try {

                responseText.innerHTML = "Loading...";
                
                const requestBody = {
                    model: selectedModel,
                    messages: [
                        { role: 'system', content: systemMessage },
                        { role: 'user', content: userMessage }
                    ]
                };

                if (requestJson) {
                    requestBody.response_format = {
                        type: "json_object"
                    };
                }

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.statusText}`);
                }

                const data = await response.json();
                const content = data.choices[0]?.message?.content || "No response received.";

                if (requestJson) {
                    try {
                        const jsonContent = JSON.parse(content);
                        if (jsonContent.HTML_FILE) {
                            
                          sessionStorage.setItem("HTML_FILE", jsonContent.HTML_FILE);

                          sessionStorage.setItem("FILE_NAME", jsonContent.FILE_NAME);
                          
                          console.log(jsonContent.FILE_NAME);
                          console.log(jsonContent.HTML_FILE);

                          const blob = new Blob([jsonContent.HTML_FILE], { type: 'text/html' });
                          const iframe = document.getElementById('myIframe');
                          iframe.src = URL.createObjectURL(blob);

                          responseText.innerHTML = "Ready for input...";

                          scrollToId("myIframe");
                            
                        } else {
                            responseText.style.display = 'block';

                            throw new Error(`API Error: ${response.statusText}`);
                            //responseText.innerHTML = JSON.stringify(jsonContent, null, 2);
                        }
                    } catch (e) {
                        responseText.style.display = 'block';

                        throw new Error(`API Error: ${response.statusText}`);
                        //responseText.innerHTML = content;
                    }
                } else {
                    responseText.style.display = 'block';

                    throw new Error(`API Error: ${response.statusText}`);
                    //responseText.innerHTML = content;
                }
            } catch (error) {
                if (retryCount < MAX_RETRIES) {
                    responseText.innerHTML = `An error possibly occurred. Retrying... (Attempt ${retryCount + 1}/${MAX_RETRIES})`;
                    await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));
                    return makeApiRequest(retryCount + 1);
                } else {
                    responseText.innerHTML = `Error after ${MAX_RETRIES} attempts: ${error.message}`;
                }
            }
        }

        document.getElementById('submit-button').addEventListener('click', () => makeApiRequest());

        function openTab(HTML_FILE) {
          const newTab = window.open('', '_blank'); // Open a blank tab
          newTab.document.open(); // Open the document for writing
          newTab.document.write(HTML_FILE); // Write the HTML content
          newTab.document.close(); // Close the document stream
        }

        function scrollToId(id) {
    const element = document.getElementById(id);
    if (element) {
        element.scrollIntoView({ behavior: "smooth" });
    }
}

function downloadHTML(filename, content) {
    const blob = new Blob([content], { type: "text/html" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}

    </script>


    
    <script src="https://avemariacloud.com/generic-loader.js"></script>

</body>
</html>
